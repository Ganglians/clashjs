(this.webpackJsonpclashjs=this.webpackJsonpclashjs||[]).push([[0],[,,,,,,function(t,e){t.exports.lasers={laser0:{play:function(){}},laser1:{play:function(){}},laser2:{play:function(){}},laser3:{play:function(){}},laser4:{play:function(){}},laser5:{play:function(){}},laser6:{play:function(){}},laser7:{play:function(){}},laser8:{play:function(){}}},t.exports.explosions={explode0:{play:function(){}},explode1:{play:function(){}},explode2:{play:function(){}}},t.exports.streak={firstBlood:{play:function(){}},doubleKill:{play:function(){}},tripleKill:{play:function(){}},monsterKill:{play:function(){}},killingSpree:{play:function(){}},dominating:{play:function(){}},rampage:{play:function(){}},godLike:{play:function(){}},ownage:{play:function(){}}},t.exports.music={theme0:{play:function(){}}}},function(t,e){var n=["north","east","south","west"],i=["north","east","south","west","shoot"],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];switch(i){case n[0]:return t[1]===e[1]&&t[0]>e[0];case n[1]:return t[0]===e[0]&&t[1]<e[1];case n[2]:return t[1]===e[1]&&t[0]<e[0];case n[3]:return t[0]===e[0]&&t[1]>e[1]}};t.exports={randomMove:function(){return Math.random()>.33?"move":i[Math.floor(Math.random()*i.length)]},getDirection:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t=t||[],e=e||[];var n=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]);return n>i?t[0]-e[0]>0?"north":"south":t[1]-e[1]>0?"west":"east"},isVisible:o,canKill:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.some((function(e){return e.isAlive&&o(t.position,e.position,t.direction)}))},safeRandomMove:function(){return Math.random()>.33?"move":n[Math.floor(Math.random()*n.length)]},fastGetDirection:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Math.abs(t[0]-e[0]);return n?t[0]-e[0]>0?"north":"south":t[1]-e[1]>0?"west":"east"},turn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=n.indexOf(t);return n[(i+e)%4]},getDistance:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]);return i+n}}},,,,function(t,e){var n,i,o,a,r="0123456789",s="abcdefghijklmnoprstuvxuyz",l=s.toUpperCase(),c="+/";t.exports=e={},n=function(){return[r,s,l,c].join("")},i=function(){return[r,s,l].join("")},o=function(){return[l,r].join("")},a=function(t,e){var n,i="";for(n=0;n<e;n+=1)i+=t[Math.ceil(100*Math.random()%t.length||1)-1];return i},e.generateBase64String=function(t){return a(n(),t)},e.generateBase62String=function(t){return a(i(),t)},e.generateBase32String=function(t){return a(o(),t)},e.generateBase10String=function(t){return a(r,t)}},function(t,e,n){var i=n(1),o=n(7),a=["north","east","south","west"],r=function(t,e){return t<0?0:t>e-1?e-1:t};t.exports=function(t){var e=t.playerIndex,n=t.playerAction,s=t.playerStates,l=t.playerInstances,c=t.gameEnvironment,u=t.evtCallback,h=t.coreCallback,m=s[e];if(-1!==a.indexOf(n))return m.direction=n,s;if("move"===n){switch(m.direction){case a[0]:m.position[0]--;break;case a[1]:m.position[1]++;break;case a[2]:m.position[0]++;break;case a[3]:m.position[1]--}m.position[0]=r(m.position[0],c.gridSize),m.position[1]=r(m.position[1],c.gridSize),c.ammoPosition.forEach((function(t,e){t[0]===m.position[0]&&t[1]===m.position[1]&&(c.ammoPosition.splice(e,1),m.ammo+=1)}))}if("shoot"===n&&m.ammo>0){m.ammo-=1;var f=[],p=[];u("SHOOT",{shooter:e,origin:m.position,direction:m.direction}),s.forEach((function(t,e){t.isAlive&&o.isVisible(m.position,t.position,m.direction)&&(f.push(e),t.isAlive=!1)})),f.length&&(p=i.filter(s,(function(t){return t.isAlive})),h("KILL",{killer:l[e],killed:i.map(f,(function(t){return l[t]}))}),u("KILL",{killer:e,killed:f}),p.length||(h("DRAW"),u("DRAW")),1===p.length&&(h("WIN",{winner:l[e]}),u("WIN",{winner:l[e]})))}return s}},function(t,e,n){t.exports={codingpains:n(24),ericku:n(26),horror:n(27),elperron:n(28),yuno:n(29),xmontoya:n(30),margeux:n(31)}},,function(t,e,n){t.exports=n(32)},,,,,function(t,e,n){},function(t,e,n){},,,function(t,e,n){var i=n(1),o=n(7),a=n(25),r={info:{name:"HGE-7",style:8},ai:function(t,e,n){var o=i.filter(e,(function(t){return t.ammo>0}));return a.inDanger(t,o)?r._eluder(t,o,n):t.ammo?r._hunter(t,e,n):r._gatherer(t,e,n)},_gatherer:function(t,e,n){var i,s,l;if(r.info.mode="g",n.ammoPosition.length){if((i=a.shouldMoveForAmmo(t,e,n))&&a.isMovementSafe(i,t,e,n))return i;if(l=a.goToCenter(t,n),a.isMovementSafe(l,t,e,n))return l}else if(l=a.goToCenter(t,n),a.isMovementSafe(l,t,e,n))return l;return(s=a.getSafestMove(t,e,n))&&a.isMovementSafe(s,t,e,n)?s:o.safeRandomMove()},_hunter:function(t,e,n){var i,s;return r.info.mode="h",e=a.getDangerousEnemies(e),o.canKill(t,e)?"shoot":(i=a.turnToAmbush(t,e))||(i=a.turnToKill(t,e))&&a.isMovementSafe(i,t,e,n)?i:(s=a.chaseEnemy(t,e,n))&&a.isMovementSafe(s,t,e,n)?s:a.getSafestMove(t,e,n)||!1},_eluder:function(t,e,n){var s=a.getImmediateThreats(t,e),l={y:[],x:[]};return r.info.mode="e",s.length?a.canKillAll(t,s)?"shoot":!!a.isMovementSafe("move",t,s,n)&&"move":t.ammo?this._hunter(t,e,n):(i.forEach(e,(function(e){a.sameY(t.position,e.position)&&l.y.push(e),a.sameX(t.position,e.position)&&l.x.push(e)})),l.x.length?t.ammo&&o.canKill(t,l.x)?"shoot":a.isHorizontal(t.direction)&&a.canMoveTowards(t.direction,t,n)?"move":a.opositeDirection(l.x[0].direction):t.ammo&&o.canKill(t,l.y)?"shoot":a.isVertical(t.direction)&&a.canMoveTowards(t.direction,t,n)?"move":a.opositeDirection(l.y[0].direction))}};t.exports=r},function(t,e,n){var i=n(1),o=n(7),a=["north","east","south","west"],r=function(t,e){return t[0]===e[0]},s=function(t,e){return t[1]===e[1]},l=function(t,e){return e.map((function(e){return e.ammo>0&&o.isVisible(e.position,t.position,e.direction)})).filter((function(t){return!0===t})).length>0},c=function(t,e){var n;if(e.length)return n=e[0],e.forEach((function(e){o.getDistance(t.position,e)<o.getDistance(t.position,n)&&(n=e)})),n},u=function(t,e,n){return n.ammoPosition.filter((function(n){var i=o.getDistance(t.position,n);return!e.some((function(t){return o.getDistance(t.position,n)<i}))}))},h=function(t,e,n,i){var o=JSON.parse(JSON.stringify(e));if("move"===t)switch(e.direction){case a[0]:o.position[0]>0&&o.position[0]--;break;case a[1]:o.position[1]<i.gridSize&&o.position[1]++;break;case a[2]:o.position[0]<i.gridSize&&o.position[0]++;break;case a[3]:o.position[1]>0&&o.position[1]--}return!l(o,n)},m=function(t,e){var n,i=e.slice(0,e.length);return i=i.filter((function(t){return t.isAlive})),n=i[0],i.forEach((function(e){o.getDistance(t,e)<o.getDistance(t,n)&&(n=e)})),n},f=function(t){var e=t.position.slice(0,2);switch(t.direction){case"north":e[0]++;break;case"south":e[0]--;break;case"west":e[1]++;break;case"east":e[1]--}return e},p=function(t,e){return Math.abs(t.position[0]-t.position[0])&&"north"!==e.position&&"south"!==e.position?t.position[0]-e.position[0]>0?"north":"south":t.position[1]-e.position[1]>0?"west":"east"},d=function(t,e){return t[0]-e[0]},v=function(t,e){return Math.abs(d(t,e))},g=function(t,e){return t[1]-e[1]},y=function(t,e){return Math.abs(g(t,e))},k=function(t){return["north","south"].indexOf(t)>-1},S=function(t){return["west","east"].indexOf(t)>-1},b=function(t){var e;switch(t){case"north":e="south";break;case"south":e="north";break;case"west":e="east";break;case"east":e="west"}return e},w=function(t,e,n){var i=m(t,e),o=(f(i),p(t,i));return o!==t.direction?o:h("move",t,[i],n)?"move":k(t.direction)&&1===y(t.position,i.position)||S(t.direction)&&1===v(t.position,i.position)?"hold":b(i.direction)},_=function(t,e){var n=!1,i=JSON.parse(JSON.stringify(t));return a.forEach((function(t){i.direction=t,o.canKill(i,e)&&(n=t)})),n};t.exports={inDanger:function(t,e){if(!e.length)return!1;var n=t.position;return i.some(e,(function(t){return r(n,t.position)||s(n,t.position)}))},sameY:r,sameX:s,canDie:l,canMoveTowards:function(t,e,n){var i=!1;switch(t){case"north":i=e.position[0]>0;break;case"east":i=e.position[1]<n.gridSize;break;case"south":i=e.position[0]<n.gridSize-1;break;case"west":i=e.position[1]>0}return i},canKillMany:function(t,e){var n=t.position,a=t.direction;return i.filter(e,(function(t){return o.isVisible(n,t.position,a)})).length>2},getClosestAmmo:c,getReachableAmmo:u,shouldMoveForAmmo:function(t,e,n){var i,a,r=u(t,e,n);return!!r.length&&(i=c(t,r),(a=o.fastGetDirection(t.position,i))!==t.direction?a:"move")},isMovementSafe:h,getSafestMove:function(t,e,n){var i=h("north",t,e,n),o=h("move",t,e,n);return i&&t.ammo?_(t,e)||w(t,e,n):o?"move":void 0},goToCenter:function(t,e){var n=[e.gridSize,e.gridSize].map((function(t){return Math.floor(t/2)})),i=o.fastGetDirection(t.position,n);return i===t.direction&&(i="move"),i},getClosestEnemy:m,getBackPosition:f,sneakyGetDirection:p,isHorizontal:S,isVertical:k,absVerticalDelta:v,absHorizontalDelta:y,opositeDirection:b,chaseEnemy:w,turnToKill:_,turnToAmbush:function(t,e){var n,i=e.filter((function(e){switch(e.direction){case"north":return-1===d(t.position,e.position);case"east":case"south":return 1===d(t.position,e.position);case"west":return-1===d(t.position,e.position);default:return!1}}));if(i.length)return n=i[0],k(n.direction)?g(t.position,n.position)<0?"east":"west":d(t.position,n.position)<0?"south":"north"},canKillAll:function(t,e){if(!t.ammo)return!1;var n=e.filter((function(e){return o.canKill(t,[e])}));return e.length===n.length},getImmediateThreats:function(t,e){return e.filter((function(e){return e.ammo>0&&o.isVisible(e.position,t.position,e.direction)}))},getDangerousEnemies:function(t){var e=t.filter((function(t){return t.ammo}));return e.length?e:t}}},function(t,e,n){var i=n(7),o=["north","east","south","west"],a=function(t,e){var n,o=function(t,e){if(e.ammoPosition.length){var n=t.position,o=e.ammoPosition[0];return e.ammoPosition.forEach((function(t){i.getDistance(n,t)<i.getDistance(n,o)&&(o=t)})),o}}(t,e);if(o)return(n=i.fastGetDirection(t.position,o))!==t.direction?n:"move"},r=function(t,e,n,a){var r=JSON.parse(JSON.stringify(e));if("move"===t)switch(e.direction){case o[0]:r.position[0]>0&&r.position[0]--;break;case o[1]:r.position[1]<a.gridSize[1]&&r.position[1]++;break;case o[2]:r.position[0]<a.gridSize[0]&&r.position[0]++;break;case o[3]:r[1]>0&&r.position[1]--}return!function(t,e){return e.filter((function(t){return t.isAlive})).map((function(e){return i.canKill(e,[t],e.direction)})).filter((function(t){return!0===t})).length>0}(r,n)},s=function(t,e,n){var i=r("north",t,e,n),o=r("move",t,e,n);return i&&t.ammo?c(t,e)||l(t,e):o?"move":void 0},l=function(t,e){var n=function(t,e){var n,o=e.slice(0,e.length);return o=o.filter((function(t){return t.isAlive})),n=o[0],o.forEach((function(e){i.getDistance(t,e)<i.getDistance(t,n)&&(n=e)})),n}(t,e),o=i.fastGetDirection(t.position,n.position);return o!==t.direction?o:"move"},c=function(t,e){var n="north"===t.direction?"south":"north",a=JSON.parse(JSON.stringify(t));return e=e.filter((function(t){return t.isAlive})),o.forEach((function(t){a.direction=t,i.canKill(a,e)&&(n=t)})),n},u={info:{name:"Gurren",style:6},ai:function(t,e,n){return t.ammo?function(t,e,n){var o;return i.canKill(t,e)?"shoot":(o=c(t,e))&&r(o,t,e,n)?o:s(t,e,n)||"stay"}(t,e,n):function(t,e,n){var o;return(o=a(t,n))&&r(o,t,e,n)?o:s(t,e,n)||i.safeRandomMove()}(t,e,n)}};t.exports=u},function(t,e,n){var i=n(7),o={info:{name:"Horror",style:10},ai:function(t,e,n){var o;return i.canKill(t,e)&&t.ammo?"shoot":n.ammoPosition.length?(o=i.fastGetDirection(t.position,n.ammoPosition[0]))!==t.direction?o:"move":i.safeRandomMove()}};t.exports=o},function(t,e,n){var i=n(7),o=0,a=null,r={1:"north",2:"east",3:"south",4:"west"},s=0,l={info:{name:"ElPerron",style:7},ai:function(t,e,n){var l,c;if(i.canKill(t,e)&&t.ammo)return"shoot";if(0==t.ammo||1==s){var u=function(){var e=t.position,i=22,o=null;for(var a in n.ammoPosition){var r=n.ammoPosition[a],s=Math.abs(e[1]-r[1])+Math.abs(e[0]-r[0]);s<i&&(i=s,o=r)}return o}();return l=i.getDirection(t.position,u),null!=(c=a)&&c[0]==t.position[0]&&c[1]==t.position[1]&&(s=0),a=u,l!==t.direction?l:"move"}return++o>4&&(o=1,s++),r[o]}};t.exports=l},function(t,e,n){var i=n(7),o=["north","east","south","west"],a=function(t,e){var n=e.reduce((function(e,n){return(-1===e[0]||i.getDistance(t,n)<e[0])&&(e[0]=i.getDistance(t,n),e[1]=n),e}),[-1,0]);return i.fastGetDirection(t,n[1])},r={info:{name:"Yuno",style:9},ai:function(t,e,n){var r,s,l,c;return i.canKill(t,e)&&t.ammo?"shoot":t.ammo?(l=t.position,c=e.map((function(t){return t.position})),(s=o.reduce((function(t,e){return t||c.reduce((function(t,n){return t||(i.isVisible(l,n,e)?e:null)}),null)}),null))||(s=a(t.position,e.map((function(t){return t.position}))))!==t.direction?s:"move"):n.ammoPosition.length?(r=a(t.position,n.ammoPosition))!==t.direction?r:"move":i.safeRandomMove()}};t.exports=r},function(t,e,n){var i=n(7),o={info:{name:"Xmontoya89",style:1},ai:function(t,e,n){var o;return i.canKill(t,e)&&t.ammo?"shoot":n.ammoPosition.length?(o=i.fastGetDirection(t.position,n.ammoPosition[0]))!==t.direction?o:i.safeRandomMove():"move"}};t.exports=o},function(t,e,n){var i=n(7),o=!0,a={info:{name:"margeux",style:5},ai:function(t,e,n){var a,r;return t.ammo>0&&(o=!1),0==t.ammo&&(o=!0),n.ammoPosition.length&&o?(a=i.fastGetDirection(t.position,n.ammoPosition[0]))!==t.direction?a:"move":o?i.canKill(t,e)&&t.ammo?"shoot":n.ammoPosition.length?(a=i.fastGetDirection(t.position,n.ammoPosition[0]))!==t.direction?a:"move":i.safeRandomMove():(r=i.fastGetDirection(t.position,e[0].position))!==t.direction?i.fastGetDirection(e[0].position,t.position)!==e[0].position?r:i.safeRandomMove():i.canKill(t,e)&&t.ammo?"shoot":i.safeRandomMove()}};t.exports=a},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(10),r=n.n(a),s=(n(20),n(21),n(14)),l=n(2),c=n(3),u=n(8),h=n(5),m=n(4),f=n(1),p=n.n(f),d=n(6),v=n.n(d),g=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var t,e=this.props.gridSize,n=100/e,i=[];for(t=0;t<e*e;t++)i.push(o.a.createElement("div",{style:{height:n+"vmin",width:n+"vmin"},className:"clash-tile",key:t}));return o.a.createElement("div",null,i)}}]),n}(o.a.Component),y=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props,e=t.gridSize,n=t.ammoPosition,i=100/e,a=p.a.map(n,(function(t,e){return o.a.createElement("div",{key:e,className:"clash-ammo",style:{top:i*t[0]+"vmin",left:i*t[1]+"vmin",width:i+"vmin",height:i+"vmin"}})}));return o.a.createElement("div",{className:"clash-layer animation-glow"},a)}}]),n}(o.a.Component),k=["north","east","south","west"],S=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).state={playerDirections:t.playerStates.map((function(t){return k.indexOf(t.direction)}))},i}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(t){var e=this.state.playerDirections,n=t.playerStates.map((function(t){return k.indexOf(t.direction)}));this.setState({playerDirections:n.map((function(t,n){var i=(t+4)%4-(e[n]+4)%4;return 3===i&&(i=-1),-3===i&&(i=1),e[n]+i}))})}},{key:"render",value:function(){var t=this.state.playerDirections,e=this.props,n=e.gridSize,i=e.playerStates,a=e.playerInstances,r=100/n,s=p.a.map(i,(function(e,n){if(!e.isAlive)return null;var i=a[n].getInfo();return o.a.createElement("div",{key:n,className:"clash-player-container",style:{width:r+"vmin",height:r+"vmin",transform:"translateY("+r*e.position[0]+"vmin) translateX("+r*e.position[1]+"vmin)"}},o.a.createElement("div",{className:"clash-player",style:{width:r+"vmin",height:r+"vmin",backgroundImage:"url(static/rockets/rocket"+(e.style||0)+".png)",transform:"scale(1.25) rotate("+90*t[n]+"deg) "}}),o.a.createElement("div",{className:"clash-player-name"},i.name))}));return o.a.createElement("div",{className:"clash-layer"},s)}}]),n}(o.a.Component),b=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props,e=t.stats,n=t.rounds,i=t.total;return e=p.a.map(e,(function(t){return t})),e=p.a.sortBy(e,(function(t){return-1*t.wins})),o.a.createElement("div",{className:"stats"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Round ",n,"/",i),o.a.createElement("th",null,"Wins"))),o.a.createElement("tbody",null,p.a.map(e,(function(t,e){return o.a.createElement("tr",{key:e,className:t.isAlive?"":"player-dead"},o.a.createElement("td",{className:"player-dead-emoji"},"\ud83d\udc80"),o.a.createElement("td",{className:"player-name"},t.name),o.a.createElement("td",{className:"stats-results"},t.wins))})))))}}]),n}(o.a.Component),w=["north","east","south","west"],_=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(t){return t.shoots.length!==this.props.shoots.length}},{key:"render",value:function(){var t=this.props,e=t.shoots,n=100/t.gridSize,i=p.a.map(e,(function(t,e){return o.a.createElement("div",{key:e,className:"clash-shoot animation-shot",style:{top:n*t.origin[0]+"vmin",left:n*t.origin[1]+"vmin",transform:"translatex("+n/2+"vmin) translatey("+n/2+"vmin) rotate("+90*(w.indexOf(t.direction)-1)+"deg) "}})}));return o.a.createElement("div",{className:"clash-layer"},i)}}]),n}(o.a.Component),E=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props.kills,e=new Date;return p.a.remove(t,(function(t){return e-t.date>3e3})),t=p.a.sortBy(t,(function(t){return t.date.valueOf})),o.a.createElement("div",{className:"notifications"},p.a.map(t,(function(t,e){return o.a.createElement("p",{key:e},t.text)})))}}]),n}(o.a.Component),x=n(11),M=n.n(x),D=function(){function t(e){Object(l.a)(this,t),this._id=M.a.generateBase32String(8),this._playerInfo=e.info,this._playerAI=e.ai}return Object(c.a)(t,[{key:"getId",value:function(){return this._id}},{key:"getInfo",value:function(){return this._playerInfo}},{key:"getName",value:function(){return this._playerInfo.name}},{key:"playExplosion",value:function(){var t=Math.round(10*Math.random())%3;v.a.explosions["explode"+t].play()}},{key:"execute",value:function(t,e,n){try{return this._playerAI(t,e,n)}catch(i){console.error("!",i)}}}]),t}(),I=n(12),O=n.n(I),C=["north","east","south","west"],T=function(){function t(e,n,i){var o=this;Object(l.a)(this,t),this._totalRounds=2*e.length+6,this._rounds=0,this._gameStats=n||{},this._evtCallback=function(t,e){i(t,e)},this._alivePlayerCount=0,this._suddenDeathCount=0,this._playerInstances=e.map((function(t){var e=new D(t);return o._gameStats[e.getId()]={name:e.getName(),deaths:0,kills:0,kdr:0,wins:0,winrate:0},e})),this.setupGame()}return Object(c.a)(t,[{key:"_getAlivePlayerCount",value:function(){return this._playerStates.reduce((function(t,e){return e.isAlive?t+1:t}),0)}},{key:"setupGame",value:function(){var t=this;this._gameEnvironment={gridSize:13,ammoPosition:[]},this._rounds++,this._suddenDeathCount=0,this._playerInstances=p.a.shuffle(this._playerInstances),this._alivePlayerCount=this._playerInstances.length,this._playerStates=this._playerInstances.map((function(e){var n=t._gameEnvironment.gridSize;return{style:e.getInfo().style,position:[Math.floor(Math.random()*n),Math.floor(Math.random()*n)],direction:C[Math.floor(4*Math.random())],ammo:0,isAlive:!0}})),this._currentPlayer=0,this._createAmmo()}},{key:"_createAmmo",value:function(){var t=[Math.floor(Math.random()*this._gameEnvironment.gridSize),Math.floor(Math.random()*this._gameEnvironment.gridSize)];this._gameEnvironment.ammoPosition.some((function(e){return e[0]===t[0]&&e[1]===t[1]}))?this._createAmmo():this._gameEnvironment.ammoPosition.push(t)}},{key:"getState",value:function(){return{gameEnvironment:this._gameEnvironment,gameStats:this._gameStats,rounds:this._rounds,totalRounds:this._totalRounds,playerStates:this._playerStates,playerInstances:this._playerInstances}}},{key:"nextPly",value:function(){var t=this;this._suddenDeathCount>100*this._getAlivePlayerCount()&&(this._evtCallback("DRAW"),this._handleCoreAction("DRAW"));var e=p.a.cloneDeep(this._playerStates,!0);this._getAlivePlayerCount()<2&&(this._suddenDeathCount+=10),this._getAlivePlayerCount()<3&&this._suddenDeathCount++;var n=e.filter((function(e,n){return n!==t._currentPlayer&&e.isAlive}));return this._playerStates[this._currentPlayer].isAlive&&this._savePlayerAction(this._currentPlayer,this._playerInstances[this._currentPlayer].execute(e[this._currentPlayer],n,p.a.cloneDeep(this._gameEnvironment,!0))),this._currentPlayer=(this._currentPlayer+1)%this._playerInstances.length,this._gameEnvironment.ammoPosition.length<this._playerStates.length/1.2&&Math.random()>.92&&this._createAmmo(),Math.random()>.98&&this._createAmmo(),this.getState()}},{key:"_handleCoreAction",value:function(t,e){var n=this;if("KILL"===t){var i=e.killer,o=e.killed;this._gameStats[i.getId()].kills++,p.a.forEach(this._playerInstances,(function(t){var e=n._gameStats[t.getId()];o.indexOf(t)>-1&&(n._alivePlayerCount--,e.deaths++),e.deaths?e.kdr=e.kills/e.deaths:e.kdr=e.kills})),this._suddenDeathCount=0}return"WIN"===t&&(this._gameStats[e.winner.getId()].wins++,p.a.forEach(this._gameStats,(function(t,e){var i=t.wins;t.winrate;t.winrate=Math.round(100*i/n._rounds)})),this._rounds>=this._totalRounds)||"DRAW"===t&&(p.a.forEach(this._gameStats,(function(t,e){var i=t.wins;t.winrate;t.winrate=Math.round(100*i/n._rounds)})),this._rounds>=this._totalRounds)?this._evtCallback("END"):void 0}},{key:"_savePlayerAction",value:function(t,e){this._playerStates=O()({playerIndex:t,playerAction:e,playerStates:this._playerStates,playerInstances:this._playerInstances,gameEnvironment:this._gameEnvironment,evtCallback:this._evtCallback,coreCallback:this._handleCoreAction.bind(this)})}}]),t}(),A=n(13),P=n.n(A),j=p.a.shuffle(p.a.map(P.a,(function(t){return t}))),N=[],K=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(l.a)(this,n),i=e.call(this,t),window.ClashInstance=new T(j,{},i.handleEvent.bind(Object(u.a)(i))),i.state={clashjs:window.ClashInstance.getState(),shoots:[],speed:100,kills:[],currentGameIndex:1,finished:!1},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.nextTurn()}},{key:"handleClick",value:function(){this.setState({speed:Math.floor(.9*this.state.speed)})}},{key:"newGame",value:function(){var t=this;N=[],this.nextTurnTimeout&&clearTimeout(this.nextTurnTimeout),window.ClashInstance.setupGame(),this.setState((function(t){return{clashjs:window.ClashInstance.getState(),speed:100,kills:[],currentGameIndex:t.currentGameIndex+1}}),(function(){t.nextTurnTimeout&&clearTimeout(t.nextTurnTimeout),window.setTimeout((function(){t.nextTurn()}),50)}))}},{key:"nextTurn",value:function(){var t=this;if(!this.state.finished){var e=this.state.currentGameIndex;this.nextTurnTimeout&&clearTimeout(this.nextTurnTimeout),this.nextTurnTimeout=window.setTimeout((function(){if(t.state.currentGameIndex===e){if(window.ClashInstance.getState().playerStates.reduce((function(t,e){return e.isAlive?t+1:t}),0)<2)return window.ClashInstance.nextPly(),void t.nextTurn();window.ClashInstance.nextPly(),t.setState({clashjs:window.ClashInstance.getState(),speed:t.state.speed>50?parseInt(.99*t.state.speed,10):50},t.nextTurn)}}),this.state.speed)}}},{key:"handleEvent",value:function(t,e){if("SHOOT"===t){var n=this.state.shoots;n.push({direction:e.direction,origin:e.origin.slice(),time:(new Date).getTime()}),this.setState({shoots:n})}return"WIN"===t||"DRAW"===t?this.newGame():"KILL"===t?this._handleKill(e):"END"===t?this.endGame():void 0}},{key:"_handleKill",value:function(t){var e=this,n=window.ClashInstance.getState().playerInstances,i=this.state.kills,o=n[t.killer],a=p.a.map(t.killed,(function(e){return N.push(t.killer),o.kills++,n[e].deaths++,n[e]})),r=[o.getName(),"killed",p.a.map(a,(function(t){return t.getName()})).join(",")].join(" ");i.push({date:new Date,text:r}),this.setState({kills:i}),setTimeout((function(){return e.handleStreak(t.killer,o,a)}),100)}},{key:"endGame",value:function(){this.setState({clashjs:window.ClashInstance.getState(),shoots:[],speed:0,kills:[],finished:!0})}},{key:"handleStreak",value:function(t,e,n){var i=p.a.filter(N,(function(e){return e===t})).length,o="",a="",r=this.state.kills;switch(1===N.length&&setTimeout(v.a.streak.firstBlood.play(),50),n.length){case 2:setTimeout(v.a.streak.doubleKill.play(),100),o=e.getName()+" got a double kill!";break;case 3:setTimeout(v.a.streak.tripleKill.play(),100),o=e.getName()+" got a Triple Kill!";break;case 4:setTimeout(v.a.streak.monsterKill.play(),100),o=e.getName()+" is a MONSTER KILLER!"}switch(r.push({date:new Date,text:o}),i+Math.floor(3*Math.random())){case 3:setTimeout(v.a.streak.killingSpree.play(),300),a=e.getName()+" is on a killing spree!";break;case 4:setTimeout(v.a.streak.dominating.play(),300),a=e.getName()+" is dominating!";break;case 5:setTimeout(v.a.streak.rampage.play(),300),a=e.getName()+" is on a rampage of kills!";break;case 6:setTimeout(v.a.streak.godLike.play(),300),a=e.getName()+" is Godlike!";break;default:a="Somebody please stop ".concat(e.getName(),"!"),setTimeout(v.a.streak.ownage.play(),300)}Math.random()>.5&&r.push({date:new Date,text:a}),this.setState({kills:r})}},{key:"render",value:function(){var t=this.state,e=t.clashjs,n=t.shoots,i=t.kills,a=t.finished,r=e.gameEnvironment,l=e.gameStats,c=e.playerStates,u=e.playerInstances,h=e.rounds,m=e.totalRounds;r=r||{gridSize:13},p.a.forEach(u,(function(t,e){l[t.getId()].isAlive=c[e].isAlive}));var f=Object(s.a)(i);if(a){var d=p.a.sortBy(l,(function(t){return-1*t.wins}))[0];f.push({date:new Date,text:o.a.createElement("b",{style:{color:"#0e0",fontWeight:700}},"Congrats ",d.name,"!")}),f.push({date:new Date,text:"Refresh the page to start again"})}return o.a.createElement("div",{className:"clash",onClick:this.handleClick.bind(this)},o.a.createElement(g,{gridSize:r.gridSize}),o.a.createElement(_,{shoots:n.slice(),gridSize:r.gridSize}),o.a.createElement(y,{gridSize:r.gridSize,ammoPosition:r.ammoPosition}),o.a.createElement(S,{gridSize:r.gridSize,playerInstances:u,playerStates:c}),!!f.length&&o.a.createElement(E,{kills:f}),o.a.createElement(b,{rounds:h,total:m,playerStates:c,stats:l}),!1)}}]),n}(o.a.Component);var z=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.070c8e34.chunk.js.map